## 本日の目標（TODO目標/できるようになりたいこと）
- [ ] 「患者」が新規登録した際に、患者テーブルとユーザーテーブルに登録されるようにする。
- [ ] 「患者以外」が新規登録した際に、ユーザーテーブルのみに登録されるようにする。
　
## 学習時間（Hour）
- 12.0h

## 目標振り返り（TODO進捗/できるようになりたいこと振り返り）
- [x] エンジニアキャリアパス　勉強会
- [x] 「患者」が新規登録したとき
  - 患者テーブルとユーザーテーブルに登録されるようにする。
- [x] 「患者」以外が新規登録したとき
  - ユーザーテーブルのみに登録されるようにする。
  - 患者IDの入力内容が正しくないと登録できないようにする

##  詰まっていること（実現したいこと/現状/行ったこと/仮説）
- Railsをそこまで勉強できていなかったので、基本的な部分でミスっていることに後から気づいたりしてて、もう少し基礎固めておきたかったと思う一方で、何かモノを作りながらの方が頭に入ってきやすいとも思いました。

## 学んだこと（新しい気付き、学び）
- ApplicationControllerは全てのコントローラーが継承する基底コントローラーである。この中で定義されるメソッドや設定は、その他全てのコントローラーで利用可能である。
- Railsで外部キーを追加する際には、以下のステップが必要
  1. マイグレーションファイルを生成してデータベースのスキーマを変更する（外部キーを追加する）。
  1. モデルファイルを編集して、関連するモデル間の関連付けを定義する。
- Railsのモデル間の関連付けは、データベースレベルの制約とは別に、アプリケーションレベルでの関連付けを表現する。
- モデルの関連付けはアプリケーションがどのようにデータを操作するか、どのようなビジネスロジックが存在するかを定義する
- 外部キーが参照するキーはデータ型が同じでないと、当然エラーになる
- 外部キー制約を持つテーブルを作成する前に、その制約が参照するテーブル（この場合はpatientsテーブル）が既に存在する必要があるためマイグレーションファイルの作成順序について注意すること。

## 感想（一日の感想、雑談）
- なんとか「患者」と「患者以外」の場合で、登録時の挙動を変えることができたので、残り認証で最低限の部分だけ実装したらチャット機能に進みたい。

## 明日の目標（TODO目標/できるようになりたいこと）
- [ ] 片方だけのレコードが保存されないようにトランザクションを利用して、データの整合性を担保する
- [ ] ユーザータイプ「患者」を選んだ場合は、「患者ID」は入力できないようにする
- [ ] ユーザータイプで挙動が変わるため、新規登録時に「患者として登録しますか？」のようなダイアログで確認する
- [ ] チャット機能どう実装するか調べる
